[TASK]: CODE REFACTORING
original content of api>twitch_bot.py file
class TwitchBot:
    def play_SC2_sound(self, game_event): => [DONE]
    def signal_handler(self, signal, frame):   => [DONE]
    def check_SC2_game_status():  => [DONE]
    #original function
    def handle_SC2_game_results(self, previous_game, current_game):
        #list of methods refactored from the original
        game_started_handler module => [DONE]
        game_ended_handler module => [ONGOING]
        game_tied_handler module => [NYS]
        game_replay_handler module => [NYS]
    
    def monitor_game(self): => [NYS]
    
    @Ms. Michelle started refactoring this chat related functions, I will proceed here once done above
    def msgToChannel(self, message): => [NYS]
    def processMessageForOpenAI(self, msg, conversation_mode): => [NYS]
    def on_welcome(self, connection, event): => [NYS]
    def on_pubmsg(self, connection, event): => [NYS]




chat_utils.py
def on_welcome(self, connection, event):
def processMessageForOpenAI(self, msg, conversation_mode):
def msgToChannel(self, message):
def on_pubmsg(self, connection, event):

sc2_game_utils.py
def check_SC2_game_status(): => [DONE]
def handle_SC2_game_results(): => ONGOING

sound_player_utils.py => [DONE]
def play_SC2_sound():

game_monitoring.py
def monitor_game(self):
def signal_handler(self, signal, frame):


===================================================================================================================================
[[[ 27/10/2023 => Friday
applied fix, update regex pattern to catch opponents name in two words




refactored
    class GameInfo  => game_info.py
    LogOnceWithinIntervalFilter() => log_once_within_interval_filter.py
    get_random_emote() => emote_utils.py
    find_latest_file() => file_utils.py
    play_SC2_sound() => sound_player_utils.py
    check_SC2_game_status() => sc2_game_utils.py
    handle_SC2_game_results() => ONGOING




















DB
-- DROP TABLE IF EXISTS Replays RESTRICT;

-- DROP SEQUENCE IF EXISTS <seq_name>;

-- DROP FUNCTION IF EXISTS <function_name()>;

-- DROP FUNCTION IF EXISTS <function_name(flake BIGINT)>;


















----------------------------------------
import random
import pygame
import logging
from settings import config

logger = logging.getLogger(__name__)

class SoundPlayer:
    def __init__(self):
        pygame.mixer.init()
        pygame.mixer.music.set_volume(0.7)
        self.sounds_config = config.SOUNDS_CONFIG  # Adjust the actual config attribute

    def play_sound(self, game_event):
        try:
            if game_event in self.sounds_config['sounds']:
                sound_file = random.choice(self.sounds_config['sounds'][game_event])
                pygame.mixer.music.load(sound_file)
                pygame.mixer.music.play()
                logger.debug(f"Playing sound: {game_event}")
            else:
                logger.debug(f"Sound for game event '{game_event}' not found.")
        except Exception as e:
            logger.debug(f"An error occurred while trying to play sound: {e}")

class YourMainClass:
    def __init__(self):
        self.first_run = True
        self.sound_player = SoundPlayer()

    def play_SC2_sound(self, game_event):
        if config.PLAYER_INTROS_ENABLED:
            if config.IGNORE_PREVIOUS_GAME_RESULTS_ON_FIRST_RUN and self.first_run:
                logger.debug("Per config, ignoring previous game on the first run, so no sound will be played")
                return
            self.sound_player.play_sound(game_event)
        else:
            logger.debug("SC2 player intros and other sounds are disabled")
